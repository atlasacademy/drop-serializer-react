(window["webpackJsonpdrop-serializer-react"]=window["webpackJsonpdrop-serializer-react"]||[]).push([[0],{124:function(e,t,n){},161:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(20),i=n.n(a),s=n(2),u=n(3),c=n(5),l=n(4),p=n(6),d=n(8),m=n(25),h=n(44),f=n(82),v=n(83),b=n(39),y=n(37),O=n.n(y),g=n(86),E=n.n(g),j=n(26),w=n(32),S=n.n(w),D="drop-serializer/INIT_STATE",k="drop-serializer/LOAD_SESSION",N=function(){return{type:k}},P="drop-serializer/LOAD_SETTINGS",_="drop-serializer/LOAD_SUBMISSION_QUEUE",C="drop-serializer/QUEUE_SUBMISSION",I="drop-serializer/PUSH_MESSAGE",M=function(e,t){return{type:I,payload:{type:e,message:t}}},z="drop-serializer/RESET_SUBMISSION",T="drop-serializer/SELECT_EVENT",L=function(e){return{type:T,payload:e}},U="drop-serializer/SELECT_NODE",q="drop-serializer/SET_EVENT_LIST",A="drop-serializer/SET_EVENT_DATA",F=function(e){return{type:A,payload:e}},Q="drop-serializer/SET_SHOW_FILTERS",x="drop-serializer/SET_SHOW_SETTINGS",B=function(e){return{type:x,payload:e}},R="drop-serializer/SET_SUBMISSION_PENDING",G=function(e){return{type:R,payload:e}},J="drop-serializer/SHIFT_MESSAGES",W="drop-serializer/SHIFT_SUBMISSIONS",H=function(){return{type:W}},Y="drop-serializer/UPDATE_DROP",K=function(e,t,n,r){return{type:Y,payload:{uid:e,quantity:t,count:n,ignored:r}}},V="drop-serializer/UPDATE_LOADING",$=function(e){return{type:V,payload:e}},X="drop-serializer/UPDATE_SETTING",Z=function(e,t){return{type:X,payload:{property:e,value:t}}},ee=n(84),te=n.n(ee),ne=function(e,t){return function(n,r){if(r().dropSerializer.enableQueryParameters){var o=window.location,a=new URLSearchParams(o.search);e?a.set("event",e):a.delete("event"),t?a.set("node",t):a.delete("node");var i=o.protocol+"//"+o.host+o.pathname+"?"+a.toString();window.history.replaceState({path:i},"",i)}}},re=function(e){return function(t,n){n().dropSerializer.eventData;return e?Promise.resolve().then(function(){return t(L(e))}).then(function(){return t(ne(e,!1))}).then(function(){return t($(!0))}).then(function(){return t(F(null))}).then(function(){return t(de())}).then(function(){return t($(!1))}):Promise.resolve().then(function(){return t(L(e))}).then(function(){return t(ne(!1,!1))}).then(function(){return t(F(null))})}},oe=function(e){return function(t,n){var r=n().dropSerializer.selectedEvent;return Promise.resolve().then(function(){return t({type:U,payload:e})}).then(function(){return t(ne(r,e))}).then(function(){return t(N())})}},ae=function(){return function(e,t){var n=t().dropSerializer,r=n.eventData,o=n.selectedEvent,a=n.selectedNode,i=n.settings,s=n.submissionDrops,u=r.node_drops.filter(function(e){return e.event_node_uid===a}),c=i?i.submitter_name:"",l=u.map(function(e){var t=s.filter(function(t){return t.uid===e.uid&&t.quantity===e.quantity}).shift();return t||(t={uid:e.uid,quantity:e.quantity,count:0,ignored:!1}),t}),p={event_uid:o,event_node_uid:a,submitter:c,drops:l,token:te()()};return Promise.resolve().then(function(){return e({type:C,payload:p})}).then(function(){return e({type:z})}).then(function(){return e(ie())})}},ie=function(){return function(e,t){var n=t().dropSerializer,r=n.submissionQueue;if(!n.submissionPending&&r.length){var o=r[0];return e(se(o))}}},se=function(e){return function(t,n){var r=e.event_uid,o=n().dropSerializer.domain;return Promise.resolve().then(function(){return t(G(!0))}).then(function(){return S.a.post(o+"/submit/run",e)}).then(function(e){return Promise.resolve().then(function(){return t(M("success","Created submission: "+e.data.receipt))}).then(function(){return t(H())}).then(function(){return t(G(!1))}).then(function(){return t(ue(r,e.data.missing_drops))}).then(function(){return t(ie())})}).catch(function(e){return 422===e.response.status?Promise.resolve().then(function(){return t(M("danger","Submission rejected"))}).then(function(){return t(H())}).then(function(){return t(G(!1))}).then(function(){return t(ie())}):Promise.resolve().then(function(){return t(M("warning","Issue during submission. Retrying ..."))}).then(function(){return new Promise(function(e){window.setTimeout(e,5e3)})}).then(function(){return t(G(!1))}).then(function(){return t(ie())})})}},ue=function(e,t){return function(n,r){var o=r().dropSerializer,a=o.selectedEvent,i=o.selectedNode;return t?e!==a?Promise.resolve():Promise.resolve().then(function(){return n(M("info","Event data is outdated. Refreshing now ..."))}).then(function(){return n(re(""))}).then(function(){return n(re(a))}).then(function(){return n(oe(i))}):Promise.resolve()}};function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var le=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({domain:"https://submissions.atlasacademy.io",enableEventSelector:!0,enableQueryParameters:!0,messageKey:0,messages:[],nodeSave:[],selectedEvent:"",selectedNode:"",selectedDropUid:null,selectedDropQuantity:null,selectedDropInitialCount:null,settings:{},showFilters:!1,showSettings:!1,submissionPending:!1,submissionQueue:[]},e);if(t.enableQueryParameters){var n=new URLSearchParams(window.location.search);t.selectedEvent||(t.selectedEvent=n.has("event")?n.get("event"):""),t.selectedEvent&&!t.selectedNode&&(t.selectedNode=n.has("node")?n.get("node"):"")}return function(e,n){return Promise.resolve().then(function(){return e({type:D,payload:t})}).then(function(){return e($(!0))}).then(function(){return e({type:P})}).then(function(){return e(pe())}).then(function(){return e(de())}).then(function(){return e(N())}).then(function(){return e({type:_})}).then(function(){return e(ie()),Promise.resolve()}).then(function(){return""===n().dropSerializer.settings.submitter_name?e(B(!0)):Promise.resolve()}).then(function(){return e($(!1))})}},pe=function(){return function(e,t){var n=t().dropSerializer,r=n.domain;if(n.enableEventSelector)return S.a.get(r+"/event").then(function(t){return e((n=t.data,{type:q,payload:n}));var n})}},de=function(){return function(e,t){var n=t().dropSerializer,r=n.domain,o=n.selectedEvent;if(o)return S.a.get(r+"/event/"+o).then(function(t){return e(F(t.data))})}},me=(n(124),n(36)),he=n.n(me),fe=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.setTimeout(function(){e.props.dispatch({type:J})},5e3)}},{key:"render",value:function(){return o.a.createElement(he.a,{variant:this.props.message.type},this.props.message.message)}}]),t}(o.a.Component),ve=Object(d.connect)()(fe),be=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return 0===this.props.pendingCount?null:o.a.createElement(he.a,{variant:"warning"},this.props.pendingCount," pending submission(s).")}}]),t}(o.a.Component),ye=Object(d.connect)(function(e){var t=e.dropSerializer.submissionQueue;return{pendingCount:void 0===t?0:t.length}})(be),Oe=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"Messages"},o.a.createElement(ye,null),this.props.messages.map(function(e){return o.a.createElement(ve,{key:e.key,message:e})}))}}]),t}(o.a.Component),ge=Object(d.connect)(function(e){var t=e.dropSerializer.messages;return void 0===t&&(t=[]),{messages:t}})(Oe),Ee=n(33),je=n.n(Ee),we=n(9),Se=n.n(we);function De(e,t){var n=t.property;return{property:n,value:e.dropSerializer.settings[n]}}function ke(e,t){return{update:function(n){return e(Z(t.property,n))}}}var Ne={connect:Object(d.connect)(De,ke),mapDispatchToProps:ke,mapStateToProps:De},Pe=Ne.connect(function(e){e.property;var t=e.value,n=e.update;return o.a.createElement(Se.a.Group,{controlId:"settingPlayClick"},o.a.createElement(Se.a.Label,null,"Play Click"),o.a.createElement(Se.a.Control,{as:"select",value:t?"Yes":"No",onChange:function(e){return n("Yes"===e.target.value)}},o.a.createElement("option",null,"Yes"),o.a.createElement("option",null,"No")))}),_e=Ne.connect(function(e){e.property;var t=e.value,n=e.update;return o.a.createElement(Se.a.Group,{controlId:"settingNumberOfColumns"},o.a.createElement(Se.a.Label,null,"Number of Columns"),o.a.createElement(Se.a.Control,{as:"select",value:t,onChange:function(e){return n(e.target.value)}},o.a.createElement("option",{value:"columns_auto"},"Auto"),o.a.createElement("option",{value:"columns_2"},"2"),o.a.createElement("option",{value:"columns_4"},"4"),o.a.createElement("option",{value:"columns_6"},"6"),o.a.createElement("option",{value:"columns_8"},"8"),o.a.createElement("option",{value:"columns_12"},"12"),o.a.createElement("option",{value:"columns_16"},"16")))}),Ce=Ne.connect(function(e){e.property;var t=e.value,n=e.update;return o.a.createElement(Se.a.Group,{controlId:"settingSubmitterName"},o.a.createElement(Se.a.Label,null,"Submitter Name"),o.a.createElement(Se.a.Control,{value:t,onChange:function(e){return n(e.target.value)}}))}),Ie=Ne.connect(function(e){e.property;var t=e.value,n=e.update;return o.a.createElement(Se.a.Group,{controlId:"settingVibrate"},o.a.createElement(Se.a.Label,null,"Vibrate"),o.a.createElement(Se.a.Control,{as:"select",value:t?"Yes":"No",disabled:!window.navigator.vibrate,onChange:function(e){return n("Yes"===e.target.value)}},o.a.createElement("option",null,"Yes"),o.a.createElement("option",null,"No")))}),Me=Ne.connect(function(e){e.property;var t=e.value,n=e.update;return o.a.createElement(Se.a.Group,{controlId:"settingAppWidth"},o.a.createElement(Se.a.Label,null,"App Width"),o.a.createElement(Se.a.Control,{as:"select",value:t,onChange:function(e){return n(e.target.value)}},o.a.createElement("option",{value:"width_full"},"Full Width"),o.a.createElement("option",{value:"width_480"},"480px"),o.a.createElement("option",{value:"width_720"},"720px"),o.a.createElement("option",{value:"width_1080"},"1080p"),o.a.createElement("option",{value:"width_2160"},"2160p")))});function ze(e){return{showSettings:e.dropSerializer.showSettings}}function Te(e){return{hide:function(){return e(B(!1))},show:function(){return e(B(!0))},toggle:function(){return e(function(e,t){var n=t().dropSerializer.showSettings;return e(B(!n))})}}}var Le={connect:Object(d.connect)(ze,Te),mapDispatchToProps:Te,mapStateToProps:ze},Ue=Le.connect(function(e){var t=e.showSettings,n=(e.show,e.hide);return o.a.createElement(je.a,{show:t,onHide:function(e){return n()}},o.a.createElement(je.a.Header,{closeButton:!0},o.a.createElement(je.a.Title,null,"Settings")),o.a.createElement(je.a.Body,null,o.a.createElement(Ce,{property:"submitter_name"}),o.a.createElement(Me,{property:"width"}),o.a.createElement(_e,{property:"columns"}),o.a.createElement(Pe,{property:"click"}),o.a.createElement(Ie,{property:"vibrate"})))}),qe=n(21),Ae=n.n(qe),Fe=n(16),Qe=Le.connect(function(e){e.showSettings;var t=e.show;e.hide;return o.a.createElement(Ae.a,{variant:"primary",className:"settings",onClick:function(e){return t(e)}},o.a.createElement(Fe.FontAwesomeIcon,{icon:"cog"}))});function xe(e,t){var n=t.nodeDrop,r=e.dropSerializer,o=r.eventData,a=r.selectedDropUid,i=r.selectedDropQuantity,s=r.selectedDropInitialCount,u=r.settings,c=r.showFilters,l=r.submissionDrops,p=o.drops.filter(function(e){return e.uid===n.uid}).shift(),d=n.quantity>1?n.quantity:p.quantity,m=l.filter(function(e){return e.uid===n.uid&&e.quantity===n.quantity}).shift();return void 0===m&&(m={uid:n.uid,quantity:n.quantity,count:0,ignored:!1}),{drop:p,nodeDrop:n,quantityDisplay:d,selectedDropUid:a,selectedDropQuantity:i,selectedDropInitialCount:s,submissionDrop:m,settings:u,showFilters:c}}function Be(e,t){return{update:function(n,r){return e(K(t.nodeDrop.uid,t.nodeDrop.quantity,n,r))}}}var Re={connect:Object(d.connect)(xe,Be),mapDispatchToProps:Be,mapStateToProps:xe},Ge=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(Se.a.Control,{type:"text",className:"drop-input",value:this.props.submissionDrop.count,onChange:function(t){return e.onChange(t)},size:"sm"})}},{key:"onChange",value:function(e){var t=parseInt(e.target.value);isNaN(t)?t=0:t<0&&(t=0),this.props.update(t,!1)}}]),t}(o.a.Component),Je=Re.connect(Ge);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var He=new(n(85).Howl)({src:"./sounds/click.mp3"}),Ye=function(e){function t(e,n){var r;Object(s.a)(this,t);var o={delay:250,iteratorSkip:2,max:void 0,min:0,step:1,windowLeash:10};return(r=Object(c.a)(this,Object(l.a)(t).call(this,e))).incrementorSettings=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},o,{},n),r.state={interval:null,iterator:0,running:!1,windowPosition:null,windowListener:null},r}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this.stopInterval()}},{key:"onMouseDown",value:function(e){this.state.running||this.startInterval()}},{key:"onMouseMove",value:function(e){}},{key:"onMouseOut",value:function(e){this.state.running&&this.stopInterval()}},{key:"onMouseUp",value:function(e){this.state.running&&(this.state.iterator<=this.incrementorSettings.iteratorSkip&&this.stepCount(),this.stopInterval())}},{key:"onWindowScroll",value:function(e){this.state.running&&(Math.abs(window.scrollY-this.state.windowPosition)>this.incrementorSettings.windowLeash&&this.stopInterval())}},{key:"stepCount",value:function(){var e=this.props.submissionDrop.count+this.incrementorSettings.step;e<this.incrementorSettings.min?e=this.incrementorSettings.min:void 0!==this.incrementorSettings.max&&e>this.incrementorSettings.max&&(e=this.incrementorSettings.max),this.props.update(e,!1),this.props.parent.animate(),this.props.settings.click&&He.play(),this.props.settings.vibrate&&window.navigator.vibrate&&window.navigator.vibrate(100)}},{key:"startInterval",value:function(){var e=this,t=setInterval(function(){return e.tick()},this.incrementorSettings.delay),n=window.scrollY,r=function(t){return e.onWindowScroll(t)};window.addEventListener("scroll",r),this.setState({iterator:0,running:!0,interval:t,windowListener:r,windowPosition:n})}},{key:"stopInterval",value:function(){this.state.running&&(clearInterval(this.state.interval),window.removeEventListener("scroll",this.state.windowListener),this.setState({running:!1,interval:null,windowListener:null,windowPosition:null}))}},{key:"tick",value:function(){this.state.iterator>this.incrementorSettings.iteratorSkip&&this.stepCount(),this.setState({iterator:this.state.iterator+1})}}]),t}(o.a.Component);function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ve(e,t){var n=t.parent;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Re.mapStateToProps(e,t),{parent:n})}var $e=Re.mapDispatchToProps,Xe={connect:Object(d.connect)(Ve,$e),mapDispatchToProps:$e,mapStateToProps:Ve},Ze=function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,{delay:250,iteratorSkip:2,step:-1,windowLeash:10}))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(Ae.a,{variant:"primary",block:!0,size:"sm",tabIndex:"-1",onMouseDown:function(t){return e.onMouseDown(t)},onMouseMove:function(t){return e.onMouseMove(t)},onMouseOut:function(t){return e.onMouseOut(t)},onMouseUp:function(t){return e.onMouseUp(t)}},o.a.createElement(Fe.FontAwesomeIcon,{icon:"minus"}))}}]),t}(Ye),et=Xe.connect(Ze),tt=function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,{delay:250,iteratorSkip:2,step:1,windowLeash:10}))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("img",{className:"drop-icon",draggable:"false",src:this.props.drop.image,alt:this.props.drop.name,onMouseDown:function(t){return e.onMouseDown(t)},onMouseMove:function(t){return e.onMouseMove(t)},onMouseOut:function(t){return e.onMouseOut(t)},onMouseUp:function(t){return e.onMouseUp(t)}})}}]),t}(Ye),nt=Xe.connect(tt),rt=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.props.showFilters?o.a.createElement("div",{className:"drop-toggle",onClick:function(t){return e.onClick(t)}},o.a.createElement(Fe.FontAwesomeIcon,{className:"drop-toggle-icon",icon:this.props.submissionDrop.ignored?"ban":"check"})):null}},{key:"onClick",value:function(e){this.props.update(0,!this.props.submissionDrop.ignored)}}]),t}(o.a.Component),ot=Re.connect(rt),at=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.selectedDropUid===this.props.nodeDrop.uid&&this.props.selectedDropQuantity===this.props.nodeDrop.quantity,t=e?this.props.submissionDrop.count-this.props.selectedDropInitialCount:0,n=(t>=0?"+":"-")+(e?Math.abs(t).toString():"");return o.a.createElement("span",{className:"drop-indicator"},n)}}]),t}(o.a.Component),it=Re.connect(at),st=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={animating:!1},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.submissionDrop.ignored&&!this.props.showFilters?null:o.a.createElement("div",{className:"drop "+this.props.settings.columns+(this.state.animating?" animating":"")},o.a.createElement("div",{className:"drop-border"},o.a.createElement("div",{className:"drop-content"},o.a.createElement("div",{className:"drop-icon-box"},o.a.createElement(nt,{nodeDrop:this.props.nodeDrop,parent:this}),o.a.createElement(it,{nodeDrop:this.props.nodeDrop}),o.a.createElement("span",{className:"drop-quantity"},this.props.quantityDisplay>1?this.props.quantityDisplay:"")),o.a.createElement(Je,{nodeDrop:this.props.nodeDrop}),o.a.createElement(et,{nodeDrop:this.props.nodeDrop,parent:this})),o.a.createElement(ot,{nodeDrop:this.props.nodeDrop})))}},{key:"animate",value:function(){var e=this;this.setState({animating:!0}),setTimeout(function(){return e.setState({animating:!1})},1)}}]),t}(o.a.Component),ut=Re.connect(st),ct=n(38),lt=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(Se.a.Control,{as:"select",className:"drop-input",value:this.props.submissionDrop.count,onChange:function(t){return e.props.update(parseInt(t.target.value),!1)},size:"sm"},Object(ct.a)(Array(5).keys()).map(function(e){return o.a.createElement("option",{key:e,value:25*e},25*e,"%")}))}}]),t}(o.a.Component),pt=Re.connect(lt),dt=function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,{max:100,step:25}))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("img",{className:"drop-icon",draggable:"false",src:this.props.drop.image,alt:this.props.drop.name,onMouseDown:function(t){return e.onMouseDown(t)},onMouseMove:function(t){return e.onMouseMove(t)},onMouseOut:function(t){return e.onMouseOut(t)},onMouseUp:function(t){return e.onMouseUp(t)}})}}]),t}(Ye),mt=Xe.connect(dt),ht=function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).call(this,e,{max:100,step:-25}))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(Ae.a,{variant:"primary",block:!0,size:"sm",tabIndex:"-1",onMouseDown:function(t){return e.onMouseDown(t)},onMouseMove:function(t){return e.onMouseMove(t)},onMouseOut:function(t){return e.onMouseOut(t)},onMouseUp:function(t){return e.onMouseUp(t)}},o.a.createElement(Fe.FontAwesomeIcon,{icon:"minus"}))}}]),t}(Ye),ft=Xe.connect(ht),vt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={animating:!1},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"drop drop-bonus "+this.props.settings.columns+(this.state.animating?" animating":"")},o.a.createElement("div",{className:"drop-border"},o.a.createElement("div",{className:"drop-content"},o.a.createElement("div",{className:"drop-icon-box"},o.a.createElement(mt,{nodeDrop:this.props.nodeDrop,parent:this}),o.a.createElement("span",{className:"drop-indicator"},"Bonus")),o.a.createElement(pt,{nodeDrop:this.props.nodeDrop}),o.a.createElement(ft,{nodeDrop:this.props.nodeDrop,parent:this}))))}},{key:"animate",value:function(){var e=this;this.setState({animating:!0}),setTimeout(function(){return e.setState({animating:!1})},1)}}]),t}(o.a.Component),bt=Re.connect(vt),yt=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=function(e){return e.event_uid+"_"+e.event_node_uid+"_"+e.uid+"_"+e.quantity};return o.a.createElement("div",{className:"drop-container"},this.props.nodeDrops.map(function(n,r){return e.props.drops[r]&&"Bonus Rate-Up"===e.props.drops[r].type?o.a.createElement(bt,{key:t(n),nodeDrop:n}):o.a.createElement(ut,{key:t(n),nodeDrop:n})}))}}]),t}(o.a.Component),Ot=Object(d.connect)(function(e){var t=e.dropSerializer.selectedNode,n=e.dropSerializer.eventData.node_drops.filter(function(e){return e.event_node_uid===t});return{drops:n.map(function(t){return e.dropSerializer.eventData.drops.filter(function(e){return e.uid===t.uid}).shift()}),nodeDrops:n}})(yt),gt=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(Se.a.Control,{as:"select",className:"event-selector",onChange:function(t){return e.updateEvent(t)},value:this.props.selectedEvent},[o.a.createElement("option",{key:0,value:""},"Select a event")].concat(this.props.eventList.map(function(e,t){return o.a.createElement("option",{key:t+1,value:e.uid},e.name)})))}},{key:"updateEvent",value:function(e){this.props.dispatch(re(e.target.value))}}]),t}(o.a.Component),Et=Object(d.connect)(function(e){return{selectedEvent:e.dropSerializer.selectedEvent,eventList:e.dropSerializer.eventList}})(gt),jt=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(Se.a.Control,{as:"select",className:"event-selector",onChange:function(t){e.updateNode(t)},value:this.props.selectedNode},[o.a.createElement("option",{key:0,value:""},"Select a node")].concat(this.props.nodeList.map(function(e,t){return o.a.createElement("option",{key:t+1,value:e.uid},e.name)})))}},{key:"updateNode",value:function(e){this.props.dispatch(oe(e.target.value))}}]),t}(o.a.Component),wt=Object(d.connect)(function(e){return{nodeList:e.dropSerializer.eventData.nodes,selectedNode:e.dropSerializer.selectedNode}})(jt),St=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(Ae.a,{variant:"primary",block:!0,onClick:function(t){return e.onClick(t)}},o.a.createElement(Fe.FontAwesomeIcon,{icon:"filter"})," Toggle Filter")}},{key:"onClick",value:function(e){var t;this.props.dispatch((t=!this.props.showFilters,{type:Q,payload:t}))}}]),t}(o.a.Component),Dt=Object(d.connect)(function(e){return{showFilters:e.dropSerializer.showFilters}})(St),kt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={delay:1e3,disabled:!1,timeout:null},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this.state.timeout&&(window.clearTimeout(this.state.timeout),this.setState({timeout:null}))}},{key:"render",value:function(){var e=this;return o.a.createElement(Ae.a,{variant:"success",block:!0,disabled:this.state.disabled,onClick:function(t){return e.submit()}},o.a.createElement("img",{className:"chest-icon",src:"assets/chest.png"})," ",this.props.dropCount,"\xa0 - \xa0",o.a.createElement(Fe.FontAwesomeIcon,{icon:"copy"})," Submit Run")}},{key:"submit",value:function(){var e=this;this.props.dispatch(ae()),this.setState({disabled:!0,timeout:window.setTimeout(function(){e.setState({disabled:!1,timeout:null})},this.state.delay)})}}]),t}(o.a.Component),Nt=Object(d.connect)(function(e){var t=e.dropSerializer.eventData.drops;return{dropCount:e.dropSerializer.submissionDrops.map(function(e){if(e.ignored)return 0;var n=t.filter(function(t){return t.uid===e.uid}).shift();return n&&"Bonus Rate-Up"===n.type?0:e.count}).reduce(function(e,t){return e+t},0)}})(kt),Pt=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.eventLoaded?o.a.createElement("a",{href:this.props.sheetLink,className:"text-success",target:"_blank",rel:"noopener noreferrer author"},o.a.createElement(Fe.FontAwesomeIcon,{icon:"file-excel"})):null}}]),t}(o.a.Component),_t=Object(d.connect)(function(e){var t=e.dropSerializer,n=t.eventData,r=t.eventList,o=r&&r.length>0&&Boolean(n);return{eventLoaded:o,sheetLink:"https://docs.google.com/spreadsheets/d/"+(o?n.sheet_id:"")}})(Pt),Ct=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(le(this.props.options))}},{key:"render",value:function(){return o.a.createElement("div",{id:"drop-serializer",className:this.props.settings.width},o.a.createElement("div",{className:"title"},o.a.createElement("h1",null,"Drop Serializer",o.a.createElement("small",null,"by ",o.a.createElement("a",{href:"https://discord.gg/TKJmuCR"},"Atlas Academy"))),o.a.createElement(Qe,null),o.a.createElement("div",{className:"links"},o.a.createElement(_t,null),o.a.createElement("a",{href:"https://github.com/atlasacademy/drop-serializer-react",className:"text-secondary",target:"_blank",rel:"noopener noreferrer author"},o.a.createElement(b.a,{icon:["fab","github"]})),o.a.createElement("a",{href:"https://discord.gg/TKJmuCR",className:"text-secondary",target:"_blank",rel:"noopener noreferrer author"},o.a.createElement(b.a,{icon:["fab","discord"]})))),this.props.eventsLoaded&&o.a.createElement(Et,null),this.props.eventLoaded&&o.a.createElement(wt,null),this.props.nodeSelected&&o.a.createElement("div",null,o.a.createElement(Ot,null),o.a.createElement(E.a,null,o.a.createElement(O.a,null,o.a.createElement(Dt,null)),o.a.createElement(O.a,null,o.a.createElement(Nt,null)))),o.a.createElement(Ue,null),this.props.isLoading&&o.a.createElement("div",{className:"loading"},o.a.createElement("div",{className:"loading-content"},o.a.createElement(b.a,{icon:"spinner",spin:!0}))),o.a.createElement(ge,null))}}]),t}(o.a.Component),It=Object(d.connect)(function(e,t){var n=e.dropSerializer,r=n.eventData,o=n.eventList,a=n.isLoading,i=n.selectedEvent,s=n.selectedNode,u=n.settings,c=t.options,l=o&&o.length>0,p=l&&Boolean(r);return{eventsLoaded:l,eventLoaded:p,isLoading:a,nodeSelected:!a&&p&&Boolean(i)&&Boolean(s),options:c,settings:u}})(Ct);function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Tt(e,t){switch(t.type){case D:return zt({},e,{},t.payload);case k:var n=e.selectedEvent,r=e.selectedNode,o=n+"_"+r,a=window.localStorage.getItem(o),i=null===a?[]:JSON.parse(a);return n&&r||(i=[]),zt({},e,{submissionDrops:i});case P:var s=window.localStorage.getItem("settings"),u=zt({},{submitter_name:"",click:!0,columns:"columns_auto",vibrate:!0,width:"width_full"},{},null===s?[]:JSON.parse(s));return zt({},e,{settings:u});case _:var c=window.localStorage.getItem("submissions"),l=null===c?[]:JSON.parse(c);return zt({},e,{submissionQueue:l});case C:var p=t.payload,d=e.submissionQueue;return d.push(p),window.localStorage.setItem("submissions",JSON.stringify(d)),zt({},e,{submissionQueue:d});case I:var m=e.messageKey,h=e.messages,f=zt({},t.payload,{key:m++}),v=[].concat(Object(ct.a)(h),[f]);return zt({},e,{messageKey:m,messages:v});case z:var b=e.selectedEvent+"_"+e.selectedNode,y=e.eventData.drops,O=e.submissionDrops.map(function(e){var t=y.filter(function(t){return t.uid===e.uid}).shift();return t&&"Bonus Rate-Up"===t.type?e:zt({},e,{count:0})});return window.localStorage.setItem(b,JSON.stringify(O)),zt({},e,{selectedDropUid:null,selectedDropQuantity:null,selectedDropInitialCount:null,submissionDrops:O});case T:return zt({},e,{selectedEvent:t.payload,selectedNode:""});case U:return zt({},e,{selectedNode:t.payload});case q:return zt({},e,{eventList:t.payload});case A:return zt({},e,{eventData:t.payload});case Q:return zt({},e,{showFilters:t.payload});case x:return zt({},e,{showSettings:t.payload});case R:return zt({},e,{submissionPending:t.payload});case J:var g=e.messages.slice(1);return zt({},e,{messages:g});case W:var E=e.submissionQueue.slice(1);return window.localStorage.setItem("submissions",JSON.stringify(E)),zt({},e,{submissionQueue:E});case Y:var j=e.selectedEvent,w=e.selectedNode,S=t.payload,N=S.uid,M=S.quantity,L=S.count,F=S.ignored,B=j+"_"+w,G=e.eventData.node_drops.filter(function(e){return e.event_node_uid===w}),H=e.submissionDrops.filter(function(e){return e.uid===N&&e.quantity===M}).shift(),K=G.map(function(t){var n=e.submissionDrops.filter(function(e){return e.uid===t.uid&&e.quantity===t.quantity}).shift();return void 0===n&&(n={uid:t.uid,quantity:t.quantity,count:0,ignored:!1}),n.uid===N&&n.quantity===M&&(n=zt({},n,{count:L,ignored:F})),n}),$=zt({},e,{submissionDrops:K});return window.localStorage.setItem(B,JSON.stringify(K)),e.selectedDropUid===N&&e.selectedDropQuantity===M||($.selectedDropUid=N,$.selectedDropQuantity=M,$.selectedDropInitialCount=H?H.count:0),$;case V:return zt({},e,{isLoading:t.payload});case X:var Z=zt({},e),ee=zt({},Z.settings);return ee[t.payload.property]=t.payload.value,Z.settings=ee,window.localStorage.setItem("settings",JSON.stringify(ee)),Z;default:return void 0===e?{settings:{}}:e}}n(161);var Lt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(l.a)(t).call(this,e))).store=Object(h.createStore)({},[Object(m.applyMiddleware)(v.a)]),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"app"},o.a.createElement(d.Provider,{store:this.store},o.a.createElement(f.DynamicModuleLoader,{modules:[{id:"drop-serializer",reducerMap:{dropSerializer:Tt}}]},o.a.createElement(It,{options:{domain:"https://submissions.atlasacademy.io",enableEventSelector:!0}}))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(162);var Ut=n(15),qt=n(22),At=n(47);Ut.library.add(qt.a),Ut.library.add(qt.b),Ut.library.add(qt.c),Ut.library.add(qt.d),Ut.library.add(qt.e),Ut.library.add(qt.f),Ut.library.add(qt.g),Ut.library.add(qt.h),Ut.library.add(qt.i),Ut.library.add(At.a),Ut.library.add(At.b),i.a.render(o.a.createElement(Lt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},87:function(e,t,n){e.exports=n(163)}},[[87,1,2]]]);
//# sourceMappingURL=main.59f77256.chunk.js.map