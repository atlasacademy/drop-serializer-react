(this["webpackJsonpdrop-serializer-react"]=this["webpackJsonpdrop-serializer-react"]||[]).push([[0],{117:function(e,t,n){},154:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(16),o=n.n(s),i=n(4),l=n(21),c=n(37),p=n(75),d=n(76),u=n(32),m=n(31),h=n.n(m),v=n(79),E=n.n(v),S=n(1),g=n(27),b=n.n(g);const y=(e,t)=>({type:"drop-serializer/PUSH_MESSAGE",payload:{type:e,message:t}}),w=e=>({type:"drop-serializer/SELECT_EVENT",payload:e}),D=e=>({type:"drop-serializer/SET_EVENT_DATA",payload:e}),O=e=>({type:"drop-serializer/SET_SHOW_SETTINGS",payload:e}),N=e=>({type:"drop-serializer/SET_SUBMISSION_PENDING",payload:e}),_=e=>({type:"drop-serializer/UPDATE_LOADING",payload:e});var I=n(77),z=n.n(I);const T=(e,t)=>(n,a)=>{if(!a().dropSerializer.enableQueryParameters)return;let r=window.location,s=new URLSearchParams(r.search);e?s.set("event",e):s.delete("event"),t?s.set("node",t):s.delete("node");let o=r.protocol+"//"+r.host+r.pathname+"?"+s.toString();window.history.replaceState({path:o},"",o)},f=e=>(t,n)=>{n().dropSerializer.eventData;return e?Promise.resolve().then(()=>t(w(e))).then(()=>t(T(e,!1))).then(()=>t(_(!0))).then(()=>t(D(null))).then(()=>t(U())).then(()=>t(_(!1))):Promise.resolve().then(()=>t(w(e))).then(()=>t(T(!1,!1))).then(()=>t(D(null)))},C=e=>(t,n)=>{const a=n().dropSerializer.selectedEvent;return Promise.resolve().then(()=>t({type:"drop-serializer/SELECT_NODE",payload:e})).then(()=>t(T(a,e))).then(()=>t({type:"drop-serializer/LOAD_SESSION"}))},j=()=>(e,t)=>{const n=t().dropSerializer,a=n.submissionQueue;if(n.submissionPending)return;if(!a.length)return;let r=a[0];return e(M(r))},M=e=>(t,n)=>{const a=e.event_uid,r=n().dropSerializer.domain;return Promise.resolve().then(()=>t(N(!0))).then(()=>b.a.post(r+"/submit/run",e)).then(e=>Promise.resolve().then(()=>t(y("success","Created submission: "+e.data.receipt))).then(()=>t({type:"drop-serializer/SHIFT_SUBMISSIONS"})).then(()=>t(N(!1))).then(()=>t(L(a,e.data.missing_drops))).then(()=>t(j()))).catch(e=>422===e.response.status?Promise.resolve().then(()=>t(y("danger","Submission rejected"))).then(()=>t({type:"drop-serializer/SHIFT_SUBMISSIONS"})).then(()=>t(N(!1))).then(()=>t(j())):Promise.resolve().then(()=>t(y("warning","Issue during submission. Retrying ..."))).then(()=>new Promise(e=>{window.setTimeout(e,5e3)})).then(()=>t(N(!1))).then(()=>t(j())))},L=(e,t)=>(n,a)=>{const r=a().dropSerializer,s=r.selectedEvent,o=r.selectedNode;return t?e!==s?Promise.resolve():Promise.resolve().then(()=>n(y("info","Event data is outdated. Refreshing now ..."))).then(()=>n(f(""))).then(()=>n(f(s))).then(()=>n(C(o))):Promise.resolve()},P=()=>(e,t)=>{const n=t().dropSerializer,a=n.domain;if(n.enableEventSelector)return b.a.get(a+"/event").then(t=>e({type:"drop-serializer/SET_EVENT_LIST",payload:t.data}))},U=()=>(e,t)=>{const n=t().dropSerializer,a=n.domain,r=n.selectedEvent;if(r)return b.a.get(a+"/event/"+r).then(t=>e(D(t.data)))};n(117);var k=n(30),x=n.n(k);class A extends r.a.Component{componentDidMount(){window.setTimeout(()=>{this.props.dispatch({type:"drop-serializer/SHIFT_MESSAGES"})},5e3)}render(){return r.a.createElement(x.a,{variant:this.props.message.type},this.props.message.message)}}var q=Object(i.connect)()(A);class F extends r.a.Component{render(){return 0===this.props.pendingCount?null:r.a.createElement(x.a,{variant:"warning"},this.props.pendingCount," pending submission(s).")}}var B=Object(i.connect)(e=>{let t=e.dropSerializer.submissionQueue;return{pendingCount:void 0===t?0:t.length}})(F);class Q extends r.a.Component{render(){return r.a.createElement("div",{className:"Messages"},r.a.createElement(B,null),this.props.messages.map(e=>r.a.createElement(q,{key:e.key,message:e})))}}var G=Object(i.connect)(e=>{let t=e.dropSerializer.messages;return void 0===t&&(t=[]),{messages:t}})(Q),R=n(28),H=n.n(R),W=n(5),J=n.n(W);function V(e,t){let n=t.property;return{property:n,value:e.dropSerializer.settings[n]}}function Y(e,t){return{update:n=>e(((e,t)=>({type:"drop-serializer/UPDATE_SETTING",payload:{property:e,value:t}}))(t.property,n))}}var K={connect:Object(i.connect)(V,Y),mapDispatchToProps:Y,mapStateToProps:V},$=K.connect((function({property:e,value:t,update:n}){return r.a.createElement(J.a.Group,{controlId:"settingPlayClick"},r.a.createElement(J.a.Label,null,"Play Click"),r.a.createElement(J.a.Control,{as:"select",value:t?"Yes":"No",onChange:e=>n("Yes"===e.target.value)},r.a.createElement("option",null,"Yes"),r.a.createElement("option",null,"No")))})),X=K.connect((function({property:e,value:t,update:n}){return r.a.createElement(J.a.Group,{controlId:"settingNumberOfColumns"},r.a.createElement(J.a.Label,null,"Number of Columns"),r.a.createElement(J.a.Control,{as:"select",value:t,onChange:e=>n(e.target.value)},r.a.createElement("option",{value:"columns_auto"},"Auto"),r.a.createElement("option",{value:"columns_2"},"2"),r.a.createElement("option",{value:"columns_4"},"4"),r.a.createElement("option",{value:"columns_6"},"6"),r.a.createElement("option",{value:"columns_8"},"8"),r.a.createElement("option",{value:"columns_12"},"12"),r.a.createElement("option",{value:"columns_16"},"16")))})),Z=K.connect((function({property:e,value:t,update:n}){return r.a.createElement(J.a.Group,{controlId:"settingSubmitterName"},r.a.createElement(J.a.Label,null,"Submitter Name"),r.a.createElement(J.a.Control,{value:t,onChange:e=>n(e.target.value)}))})),ee=K.connect((function({property:e,value:t,update:n}){return r.a.createElement(J.a.Group,{controlId:"settingVibrate"},r.a.createElement(J.a.Label,null,"Vibrate"),r.a.createElement(J.a.Control,{as:"select",value:t?"Yes":"No",disabled:!window.navigator.vibrate,onChange:e=>n("Yes"===e.target.value)},r.a.createElement("option",null,"Yes"),r.a.createElement("option",null,"No")))})),te=K.connect((function({property:e,value:t,update:n}){return r.a.createElement(J.a.Group,{controlId:"settingAppWidth"},r.a.createElement(J.a.Label,null,"App Width"),r.a.createElement(J.a.Control,{as:"select",value:t,onChange:e=>n(e.target.value)},r.a.createElement("option",{value:"width_full"},"Full Width"),r.a.createElement("option",{value:"width_480"},"480px"),r.a.createElement("option",{value:"width_720"},"720px"),r.a.createElement("option",{value:"width_1080"},"1080p"),r.a.createElement("option",{value:"width_2160"},"2160p")))}));function ne(e){return{showSettings:e.dropSerializer.showSettings}}function ae(e){return{hide:()=>e(O(!1)),show:()=>e(O(!0)),toggle:()=>e((e,t)=>{let n=t().dropSerializer.showSettings;return e(O(!n))})}}var re={connect:Object(i.connect)(ne,ae),mapDispatchToProps:ae,mapStateToProps:ne},se=re.connect((function({showSettings:e,show:t,hide:n}){return r.a.createElement(H.a,{show:e,onHide:e=>n()},r.a.createElement(H.a.Header,{closeButton:!0},r.a.createElement(H.a.Title,null,"Settings")),r.a.createElement(H.a.Body,null,r.a.createElement(Z,{property:"submitter_name"}),r.a.createElement(te,{property:"width"}),r.a.createElement(X,{property:"columns"}),r.a.createElement($,{property:"click"}),r.a.createElement(ee,{property:"vibrate"})))})),oe=n(17),ie=n.n(oe),le=n(12),ce=re.connect((function({showSettings:e,show:t,hide:n}){return r.a.createElement(ie.a,{variant:"primary",className:"settings",onClick:e=>t(e)},r.a.createElement(le.FontAwesomeIcon,{icon:"cog"}))}));function pe(e,t){let n=t.nodeDrop,a=e.dropSerializer,r=a.eventData,s=a.selectedDropUid,o=a.selectedDropQuantity,i=a.selectedDropInitialCount,l=a.settings,c=a.showFilters,p=a.submissionDrops,d=r.drops.filter(e=>e.uid===n.uid).shift(),u=n.quantity>1?n.quantity:d.quantity,m=p.filter(e=>e.uid===n.uid&&e.quantity===n.quantity).shift();return void 0===m&&(m={uid:n.uid,quantity:n.quantity,count:0,ignored:!1}),{drop:d,nodeDrop:n,quantityDisplay:u,selectedDropUid:s,selectedDropQuantity:o,selectedDropInitialCount:i,submissionDrop:m,settings:l,showFilters:c}}function de(e,t){return{update:(n,a)=>e(((e,t,n,a)=>({type:"drop-serializer/UPDATE_DROP",payload:{uid:e,quantity:t,count:n,ignored:a}}))(t.nodeDrop.uid,t.nodeDrop.quantity,n,a))}}var ue={connect:Object(i.connect)(pe,de),mapDispatchToProps:de,mapStateToProps:pe};class me extends r.a.Component{render(){return r.a.createElement(J.a.Control,{type:"text",className:"drop-input",value:this.props.submissionDrop.count,onChange:e=>this.onChange(e),size:"sm"})}onChange(e){let t=parseInt(e.target.value);(isNaN(t)||t<0)&&(t=0),this.props.update(t,!1)}}var he=ue.connect(me);const ve=new(n(78).Howl)({src:"./sounds/click.mp3"});class Ee extends r.a.Component{constructor(e,t){super(e);const n={delay:250,iteratorSkip:2,max:void 0,min:0,step:1,windowLeash:10};this.incrementorSettings=Object(S.a)(Object(S.a)({},n),t),this.state={interval:null,iterator:0,running:!1,windowPosition:null,windowListener:null}}componentWillUnmount(){this.stopInterval()}onMouseDown(e){this.state.running||this.startInterval()}onMouseMove(e){}onMouseOut(e){this.state.running&&this.stopInterval()}onMouseUp(e){this.state.running&&(this.state.iterator<=this.incrementorSettings.iteratorSkip&&this.stepCount(),this.stopInterval())}onWindowScroll(e){if(!this.state.running)return;Math.abs(window.scrollY-this.state.windowPosition)>this.incrementorSettings.windowLeash&&this.stopInterval()}stepCount(){let e=this.props.submissionDrop.count+this.incrementorSettings.step;e<this.incrementorSettings.min?e=this.incrementorSettings.min:void 0!==this.incrementorSettings.max&&e>this.incrementorSettings.max&&(e=this.incrementorSettings.max),this.props.update(e,!1),this.props.parent.animate(),this.props.settings.click&&ve.play(),this.props.settings.vibrate&&window.navigator.vibrate&&window.navigator.vibrate(100)}startInterval(){let e=setInterval(()=>this.tick(),this.incrementorSettings.delay),t=window.scrollY,n=e=>this.onWindowScroll(e);window.addEventListener("scroll",n),this.setState({iterator:0,running:!0,interval:e,windowListener:n,windowPosition:t})}stopInterval(){this.state.running&&(clearInterval(this.state.interval),window.removeEventListener("scroll",this.state.windowListener),this.setState({running:!1,interval:null,windowListener:null,windowPosition:null}))}tick(){this.state.iterator>this.incrementorSettings.iteratorSkip&&this.stepCount(),this.setState({iterator:this.state.iterator+1})}}var Se=Ee;function ge(e,t){const n=t.parent,a=ue.mapStateToProps(e,t);return Object(S.a)(Object(S.a)({},a),{},{parent:n})}const be=ue.mapDispatchToProps;var ye={connect:Object(i.connect)(ge,be),mapDispatchToProps:be,mapStateToProps:ge};var we=ye.connect(class extends Se{constructor(e){super(e,{delay:250,iteratorSkip:2,step:-1,windowLeash:10})}render(){return r.a.createElement(ie.a,{variant:"primary",block:!0,size:"sm",tabIndex:"-1",onMouseDown:e=>this.onMouseDown(e),onMouseMove:e=>this.onMouseMove(e),onMouseOut:e=>this.onMouseOut(e),onMouseUp:e=>this.onMouseUp(e)},r.a.createElement(le.FontAwesomeIcon,{icon:"minus"}))}});var De=ye.connect(class extends Se{constructor(e){super(e,{delay:250,iteratorSkip:2,step:1,windowLeash:10})}render(){return r.a.createElement("img",{className:"drop-icon",draggable:"false",src:this.props.drop.image,alt:this.props.drop.name,onMouseDown:e=>this.onMouseDown(e),onMouseMove:e=>this.onMouseMove(e),onMouseOut:e=>this.onMouseOut(e),onMouseUp:e=>this.onMouseUp(e)})}});class Oe extends r.a.Component{render(){return this.props.showFilters?r.a.createElement("div",{className:"drop-toggle",onClick:e=>this.onClick(e)},r.a.createElement(le.FontAwesomeIcon,{className:"drop-toggle-icon",icon:this.props.submissionDrop.ignored?"ban":"check"})):null}onClick(e){this.props.update(0,!this.props.submissionDrop.ignored)}}var Ne=ue.connect(Oe);class _e extends r.a.Component{render(){let e=this.props.selectedDropUid===this.props.nodeDrop.uid&&this.props.selectedDropQuantity===this.props.nodeDrop.quantity,t=e?this.props.submissionDrop.count-this.props.selectedDropInitialCount:0,n=(t>=0?"+":"-")+(e?Math.abs(t).toString():"");return r.a.createElement("span",{className:"drop-indicator"},n)}}var Ie=ue.connect(_e);class ze extends r.a.Component{constructor(e){super(e),this.state={animating:!1}}render(){return this.props.submissionDrop.ignored&&!this.props.showFilters?null:r.a.createElement("div",{className:"drop "+this.props.settings.columns+(this.state.animating?" animating":"")},r.a.createElement("div",{className:"drop-border"},r.a.createElement("div",{className:"drop-content"},r.a.createElement("div",{className:"drop-icon-box"},r.a.createElement(De,{nodeDrop:this.props.nodeDrop,parent:this}),r.a.createElement(Ie,{nodeDrop:this.props.nodeDrop}),r.a.createElement("span",{className:"drop-quantity"},this.props.quantityDisplay>1?this.props.quantityDisplay:"")),r.a.createElement(he,{nodeDrop:this.props.nodeDrop}),r.a.createElement(we,{nodeDrop:this.props.nodeDrop,parent:this})),r.a.createElement(Ne,{nodeDrop:this.props.nodeDrop})))}animate(){this.setState({animating:!0}),setTimeout(()=>this.setState({animating:!1}),1)}}var Te=ue.connect(ze);class fe extends r.a.Component{render(){return r.a.createElement(J.a.Control,{as:"select",className:"drop-input",value:this.props.submissionDrop.count,onChange:e=>this.props.update(parseInt(e.target.value),!1),size:"sm"},[...Array(5).keys()].map(e=>r.a.createElement("option",{key:e,value:25*e},25*e,"%")))}}var Ce=ue.connect(fe);var je=ye.connect(class extends Se{constructor(e){super(e,{max:100,step:25})}render(){return r.a.createElement("img",{className:"drop-icon",draggable:"false",src:this.props.drop.image,alt:this.props.drop.name,onMouseDown:e=>this.onMouseDown(e),onMouseMove:e=>this.onMouseMove(e),onMouseOut:e=>this.onMouseOut(e),onMouseUp:e=>this.onMouseUp(e)})}});var Me=ye.connect(class extends Se{constructor(e){super(e,{max:100,step:-25})}render(){return r.a.createElement(ie.a,{variant:"primary",block:!0,size:"sm",tabIndex:"-1",onMouseDown:e=>this.onMouseDown(e),onMouseMove:e=>this.onMouseMove(e),onMouseOut:e=>this.onMouseOut(e),onMouseUp:e=>this.onMouseUp(e)},r.a.createElement(le.FontAwesomeIcon,{icon:"minus"}))}});class Le extends r.a.Component{constructor(e){super(e),this.state={animating:!1}}render(){return r.a.createElement("div",{className:"drop drop-bonus "+this.props.settings.columns+(this.state.animating?" animating":"")},r.a.createElement("div",{className:"drop-border"},r.a.createElement("div",{className:"drop-content"},r.a.createElement("div",{className:"drop-icon-box"},r.a.createElement(je,{nodeDrop:this.props.nodeDrop,parent:this}),r.a.createElement("span",{className:"drop-indicator"},"Bonus")),r.a.createElement(Ce,{nodeDrop:this.props.nodeDrop}),r.a.createElement(Me,{nodeDrop:this.props.nodeDrop,parent:this}))))}animate(){this.setState({animating:!0}),setTimeout(()=>this.setState({animating:!1}),1)}}var Pe=ue.connect(Le);class Ue extends r.a.Component{render(){const e=function(e){return e.event_uid+"_"+e.event_node_uid+"_"+e.uid+"_"+e.quantity};return r.a.createElement("div",{className:"drop-container"},this.props.nodeDrops.map((t,n)=>this.props.drops[n]&&"Bonus Rate-Up"===this.props.drops[n].type?r.a.createElement(Pe,{key:e(t),nodeDrop:t}):r.a.createElement(Te,{key:e(t),nodeDrop:t})))}}var ke=Object(i.connect)(e=>{const t=e.dropSerializer.selectedNode,n=e.dropSerializer.eventData.node_drops.filter(e=>e.event_node_uid===t);return{drops:n.map(t=>e.dropSerializer.eventData.drops.filter(e=>e.uid===t.uid).shift()),nodeDrops:n}})(Ue);class xe extends r.a.Component{render(){return r.a.createElement(J.a.Control,{as:"select",className:"event-selector",onChange:e=>this.updateEvent(e),value:this.props.selectedEvent},[r.a.createElement("option",{key:0,value:""},"Select a event")].concat(this.props.eventList.map((e,t)=>r.a.createElement("option",{key:t+1,value:e.uid},e.name))))}updateEvent(e){this.props.dispatch(f(e.target.value))}}var Ae=Object(i.connect)(e=>({selectedEvent:e.dropSerializer.selectedEvent,eventList:e.dropSerializer.eventList}))(xe);class qe extends r.a.Component{render(){return r.a.createElement(J.a.Control,{as:"select",className:"event-selector",onChange:e=>{this.updateNode(e)},value:this.props.selectedNode},[r.a.createElement("option",{key:0,value:""},"Select a node")].concat(this.props.nodeList.map((e,t)=>r.a.createElement("option",{key:t+1,value:e.uid},e.name))))}updateNode(e){this.props.dispatch(C(e.target.value))}}var Fe=Object(i.connect)(e=>({nodeList:e.dropSerializer.eventData.nodes,selectedNode:e.dropSerializer.selectedNode}))(qe);class Be extends r.a.Component{render(){return r.a.createElement(ie.a,{variant:"primary",block:!0,onClick:e=>this.onClick(e)},r.a.createElement(le.FontAwesomeIcon,{icon:"filter"})," Toggle Filter")}onClick(e){this.props.dispatch({type:"drop-serializer/SET_SHOW_FILTERS",payload:!this.props.showFilters})}}var Qe=Object(i.connect)(e=>({showFilters:e.dropSerializer.showFilters}))(Be);class Ge extends r.a.Component{constructor(e){super(e),this.state={delay:1e3,disabled:!1,timeout:null}}componentWillUnmount(){this.state.timeout&&(window.clearTimeout(this.state.timeout),this.setState({timeout:null}))}render(){return r.a.createElement(ie.a,{variant:"success",block:!0,disabled:this.state.disabled,onClick:e=>this.submit()},r.a.createElement("img",{className:"chest-icon",src:"assets/chest.png"})," ",this.props.dropCount,"\xa0 - \xa0",r.a.createElement(le.FontAwesomeIcon,{icon:"copy"})," Submit Run")}submit(){this.props.dispatch((e,t)=>{const n=t().dropSerializer,a=n.eventData,r=n.selectedEvent,s=n.selectedNode,o=n.settings,i=n.submissionDrops,l=a.node_drops.filter(e=>e.event_node_uid===s),c=o?o.submitter_name:"";let p=l.map(e=>{let t=i.filter(t=>t.uid===e.uid&&t.quantity===e.quantity).shift();return t||(t={uid:e.uid,quantity:e.quantity,count:0,ignored:!1}),t}),d={event_uid:r,event_node_uid:s,submitter:c,drops:p,token:z()()};return Promise.resolve().then(()=>e({type:"drop-serializer/QUEUE_SUBMISSION",payload:d})).then(()=>e({type:"drop-serializer/RESET_SUBMISSION"})).then(()=>e(j()))}),this.setState({disabled:!0,timeout:window.setTimeout(()=>{this.setState({disabled:!1,timeout:null})},this.state.delay)})}}var Re=Object(i.connect)(e=>{const t=e.dropSerializer.eventData.drops;return{dropCount:e.dropSerializer.submissionDrops.map(e=>{if(e.ignored)return 0;let n=t.filter(t=>t.uid===e.uid).shift();return n&&"Bonus Rate-Up"===n.type?0:e.count}).reduce((e,t)=>e+t,0)}})(Ge);class He extends r.a.Component{render(){return this.props.eventLoaded?r.a.createElement("a",{href:this.props.sheetLink,className:"text-success",target:"_blank",rel:"noopener noreferrer author"},r.a.createElement(le.FontAwesomeIcon,{icon:"file-excel"})):null}}var We=Object(i.connect)(e=>{const t=e.dropSerializer,n=t.eventData,a=t.eventList,r=a&&a.length>0&&Boolean(n);return{eventLoaded:r,sheetLink:"https://docs.google.com/spreadsheets/d/"+(r?n.sheet_id:"")}})(He);class Je extends r.a.Component{componentDidMount(){this.props.dispatch((e=>{let t=Object(S.a)({domain:"https://submissions.atlasacademy.io",enableEventSelector:!0,enableQueryParameters:!0,messageKey:0,messages:[],nodeSave:[],selectedEvent:"",selectedNode:"",selectedDropUid:null,selectedDropQuantity:null,selectedDropInitialCount:null,settings:{},showFilters:!1,showSettings:!1,submissionPending:!1,submissionQueue:[]},e);if(t.enableQueryParameters){let e=new URLSearchParams(window.location.search);t.selectedEvent||(t.selectedEvent=e.has("event")?e.get("event"):""),t.selectedEvent&&!t.selectedNode&&(t.selectedNode=e.has("node")?e.get("node"):"")}return(e,n)=>Promise.resolve().then(()=>e({type:"drop-serializer/INIT_STATE",payload:t})).then(()=>e(_(!0))).then(()=>e({type:"drop-serializer/LOAD_SETTINGS"})).then(()=>e(P())).then(()=>e(U())).then(()=>e({type:"drop-serializer/LOAD_SESSION"})).then(()=>e({type:"drop-serializer/LOAD_SUBMISSION_QUEUE"})).then(()=>(e(j()),Promise.resolve())).then(()=>""===n().dropSerializer.settings.submitter_name?e(O(!0)):Promise.resolve()).then(()=>e(_(!1)))})(this.props.options))}render(){return r.a.createElement("div",{id:"drop-serializer",className:this.props.settings.width},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"Drop Serializer",r.a.createElement("small",null,"by ",r.a.createElement("a",{href:"https://discord.gg/TKJmuCR"},"Atlas Academy"))),r.a.createElement(ce,null),r.a.createElement("div",{className:"links"},r.a.createElement(We,null),r.a.createElement("a",{href:"https://github.com/atlasacademy/drop-serializer-react",className:"text-secondary",target:"_blank",rel:"noopener noreferrer author"},r.a.createElement(u.a,{icon:["fab","github"]})),r.a.createElement("a",{href:"https://discord.gg/TKJmuCR",className:"text-secondary",target:"_blank",rel:"noopener noreferrer author"},r.a.createElement(u.a,{icon:["fab","discord"]})))),this.props.eventsLoaded&&r.a.createElement(Ae,null),this.props.eventLoaded&&r.a.createElement(Fe,null),this.props.nodeSelected&&r.a.createElement("div",null,r.a.createElement(ke,null),r.a.createElement(E.a,null,r.a.createElement(h.a,null,r.a.createElement(Qe,null)),r.a.createElement(h.a,null,r.a.createElement(Re,null)))),r.a.createElement(se,null),this.props.isLoading&&r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"loading-content"},r.a.createElement(u.a,{icon:"spinner",spin:!0}))),r.a.createElement(G,null))}}var Ve=Object(i.connect)((e,t)=>{const n=e.dropSerializer,a=n.eventData,r=n.eventList,s=n.isLoading,o=n.selectedEvent,i=n.selectedNode,l=n.settings,c=t.options,p=r&&r.length>0,d=p&&Boolean(a);return{eventsLoaded:p,eventLoaded:d,isLoading:s,nodeSelected:!s&&d&&Boolean(o)&&Boolean(i),options:c,settings:l}})(Je);function Ye(e,t){switch(t.type){case"drop-serializer/INIT_STATE":return Object(S.a)(Object(S.a)({},e),t.payload);case"drop-serializer/LOAD_SESSION":{let t=e.selectedEvent,n=e.selectedNode,a=t+"_"+n,r=window.localStorage.getItem(a),s=null===r?[]:JSON.parse(r);return t&&n||(s=[]),Object(S.a)(Object(S.a)({},e),{},{submissionDrops:s})}case"drop-serializer/LOAD_SETTINGS":{let t={submitter_name:"",click:!0,columns:"columns_auto",vibrate:!0,width:"width_full"},n=window.localStorage.getItem("settings"),a=null===n?[]:JSON.parse(n),r=Object(S.a)(Object(S.a)({},t),a);return Object(S.a)(Object(S.a)({},e),{},{settings:r})}case"drop-serializer/LOAD_SUBMISSION_QUEUE":{let t=window.localStorage.getItem("submissions"),n=null===t?[]:JSON.parse(t);return Object(S.a)(Object(S.a)({},e),{},{submissionQueue:n})}case"drop-serializer/QUEUE_SUBMISSION":{let n=t.payload,a=e.submissionQueue;return a.push(n),window.localStorage.setItem("submissions",JSON.stringify(a)),Object(S.a)(Object(S.a)({},e),{},{submissionQueue:a})}case"drop-serializer/PUSH_MESSAGE":{let n=e.messageKey,a=[...e.messages,Object(S.a)(Object(S.a)({},t.payload),{},{key:n++})];return Object(S.a)(Object(S.a)({},e),{},{messageKey:n,messages:a})}case"drop-serializer/RESET_SUBMISSION":{let t=e.selectedEvent+"_"+e.selectedNode,n=e.eventData.drops,a=e.submissionDrops.map(e=>{let t=n.filter(t=>t.uid===e.uid).shift();return t&&"Bonus Rate-Up"===t.type?e:Object(S.a)(Object(S.a)({},e),{},{count:0})});return window.localStorage.setItem(t,JSON.stringify(a)),Object(S.a)(Object(S.a)({},e),{},{selectedDropUid:null,selectedDropQuantity:null,selectedDropInitialCount:null,submissionDrops:a})}case"drop-serializer/SELECT_EVENT":return Object(S.a)(Object(S.a)({},e),{},{selectedEvent:t.payload,selectedNode:""});case"drop-serializer/SELECT_NODE":return Object(S.a)(Object(S.a)({},e),{},{selectedNode:t.payload});case"drop-serializer/SET_EVENT_LIST":return Object(S.a)(Object(S.a)({},e),{},{eventList:t.payload});case"drop-serializer/SET_EVENT_DATA":return Object(S.a)(Object(S.a)({},e),{},{eventData:t.payload});case"drop-serializer/SET_SHOW_FILTERS":return Object(S.a)(Object(S.a)({},e),{},{showFilters:t.payload});case"drop-serializer/SET_SHOW_SETTINGS":return Object(S.a)(Object(S.a)({},e),{},{showSettings:t.payload});case"drop-serializer/SET_SUBMISSION_PENDING":return Object(S.a)(Object(S.a)({},e),{},{submissionPending:t.payload});case"drop-serializer/SHIFT_MESSAGES":{let t=e.messages.slice(1);return Object(S.a)(Object(S.a)({},e),{},{messages:t})}case"drop-serializer/SHIFT_SUBMISSIONS":{let t=e.submissionQueue.slice(1);return window.localStorage.setItem("submissions",JSON.stringify(t)),Object(S.a)(Object(S.a)({},e),{},{submissionQueue:t})}case"drop-serializer/UPDATE_DROP":{let n=e.selectedEvent,a=e.selectedNode,r=t.payload,s=r.uid,o=r.quantity,i=r.count,l=r.ignored,c=n+"_"+a,p=e.eventData.node_drops.filter(e=>e.event_node_uid===a),d=e.submissionDrops.filter(e=>e.uid===s&&e.quantity===o).shift(),u=p.map(t=>{let n=e.submissionDrops.filter(e=>e.uid===t.uid&&e.quantity===t.quantity).shift();return void 0===n&&(n={uid:t.uid,quantity:t.quantity,count:0,ignored:!1}),n.uid===s&&n.quantity===o&&(n=Object(S.a)(Object(S.a)({},n),{},{count:i,ignored:l})),n}),m=Object(S.a)(Object(S.a)({},e),{},{submissionDrops:u});return window.localStorage.setItem(c,JSON.stringify(u)),e.selectedDropUid===s&&e.selectedDropQuantity===o||(m.selectedDropUid=s,m.selectedDropQuantity=o,m.selectedDropInitialCount=d?d.count:0),m}case"drop-serializer/UPDATE_LOADING":return Object(S.a)(Object(S.a)({},e),{},{isLoading:t.payload});case"drop-serializer/UPDATE_SETTING":{let n=Object(S.a)({},e),a=Object(S.a)({},n.settings);return a[t.payload.property]=t.payload.value,n.settings=a,window.localStorage.setItem("settings",JSON.stringify(a)),n}default:return void 0===e?{settings:{}}:e}}n(154);class Ke extends r.a.Component{constructor(e){super(e),this.store=Object(c.createStore)({},[Object(l.applyMiddleware)(d.a)])}render(){return r.a.createElement("div",{id:"app"},r.a.createElement(i.Provider,{store:this.store},r.a.createElement(p.DynamicModuleLoader,{modules:[{id:"drop-serializer",reducerMap:{dropSerializer:Ye}}]},r.a.createElement(Ve,{options:{domain:"https://submissions.atlasacademy.io",enableEventSelector:!0}}))))}}var $e=Ke;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(155);var Xe=n(11),Ze=n(18),et=n(40);Xe.library.add(Ze.a),Xe.library.add(Ze.b),Xe.library.add(Ze.c),Xe.library.add(Ze.d),Xe.library.add(Ze.e),Xe.library.add(Ze.f),Xe.library.add(Ze.g),Xe.library.add(Ze.h),Xe.library.add(Ze.i),Xe.library.add(et.a),Xe.library.add(et.b),o.a.render(r.a.createElement($e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},80:function(e,t,n){e.exports=n(156)}},[[80,1,2]]]);
//# sourceMappingURL=main.351e5046.chunk.js.map